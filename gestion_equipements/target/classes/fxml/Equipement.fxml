<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import de.jensd.fx.glyphs.fontawesome.FontAwesomeIconView?>
        <?import javafx.scene.layout.VBox?>


<?import javafx.scene.layout.AnchorPane?>
<BorderPane style="-fx-background-color: white" stylesheets="@/css/style.css" xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/23.0.1" fx:controller="main.controllers.Controllereq">

    <!-- Titre au centre -->
    <top>
        <HBox spacing="20" style="-fx-padding: 10px;">
            <ImageView fx:id="logo" fitHeight="160" fitWidth="160" pickOnBounds="true" preserveRatio="true">
                <image>
                    <Image url="@/images/logo.png" />
                </image>


            </ImageView>

            <!-- Espacement flexible entre le logo et le titre pour centrer le texte -->

            <!-- Titre centré -->
            <Label fx:id="cityLabel" text="Tunis"  />
            <TextField fx:id="temperatureField" editable="false" promptText="Température" prefWidth="200" />
            <TextField fx:id="weatherDescriptionField" editable="false" promptText="Condition" prefWidth="200"/>
            <ImageView fx:id="weatherIcon" fitWidth="100" fitHeight="50" style="-fx-background-color: lightgray;" />

            <Button text="Get Weather" fx:id="getWeatherButton" onAction="#handleGetWeather" />

            <Label alignment="CENTER_LEFT" style="-fx-font-size: 30px; -fx-font-family: 'Brush Script MT'; -fx-text-fill: blue;" text="Gestion des Équipements" />

        </HBox>
    </top>


    <!-- Conteneur principal en HBox -->
    <center>
        <HBox alignment="CENTER" spacing="20" style="-fx-padding: 20px;">

            <!-- Formulaire à gauche -->
            <GridPane fx:id="gridPane" hgap="15" style="-fx-padding: 20px; -fx-background-color: #ffffff;                              -fx-border-color: #014aad; -fx-border-width: 3;" vgap="15">
                <Label style="-fx-text-fill: #014aad;" text="Nom :" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                <TextField fx:id="name" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                <Label style="-fx-text-fill: #014aad;" text="Description :" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                <TextField fx:id="description" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                <Label style="-fx-text-fill: #014aad;" text="Catégorie :" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                <ComboBox fx:id="categoryComboBox" promptText="Sélectionner une catégorie" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                <Label style="-fx-text-fill: #014aad;" text="Prix :" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                <TextField fx:id="price" GridPane.columnIndex="1" GridPane.rowIndex="3" />

                <Label style="-fx-text-fill: #014aad;" text="Image URL :" GridPane.columnIndex="0" GridPane.rowIndex="4" />
                <HBox spacing="10" GridPane.columnIndex="1" GridPane.rowIndex="4">
                    <Button text="Parcourir" onAction="#handleUploadImage"/>
                    <TextField fx:id="image" promptText="Sélectionner une image" />
                </HBox>
                <Label style="-fx-text-fill: #014aad;" text="Disponibilité :" GridPane.columnIndex="0" GridPane.rowIndex="5" />
                <CheckBox fx:id="availability" GridPane.columnIndex="1" GridPane.rowIndex="5" />
                <Label style="-fx-text-fill: #014aad;" text="Date d'ajout :" GridPane.columnIndex="0" GridPane.rowIndex="6" />
                <DatePicker fx:id="dateAdded" GridPane.columnIndex="1" GridPane.rowIndex="6"  />
                <Label style="-fx-text-fill: #014aad;" text="ID Partenaire :" GridPane.columnIndex="0" GridPane.rowIndex="7" />
                <TextField fx:id="partnerId" GridPane.columnIndex="1" GridPane.rowIndex="7" />
                <HBox spacing="10" alignment="CENTER_RIGHT" GridPane.columnIndex="1" GridPane.rowIndex="8">
                    <Button fx:id="saveButton" onAction="#handleAdd" style="-fx-background-color: #D4FC2A; -fx-text-fill: Black;" text="Ajouter" styleClass="bounce-button">
                        <graphic>
                            <FontAwesomeIconView glyphName="PLUS" size="16" />
                        </graphic>
                    </Button>

                    <Button fx:id="btnModifier" onAction="#handleUpdate" style="-fx-background-color: #00bfff ; -fx-text-fill: white;" text="Modifier" styleClass="bounce-button">
                        <graphic>
                            <FontAwesomeIconView glyphName="PENCIL" size="16"  />
                        </graphic>
                    </Button>

                    <Button fx:id="btnSupprimer" onAction="#handleDelete" style="-fx-background-color: #00A859; -fx-text-fill: white;" text="Supprimer" styleClass="bounce-button">
                        <graphic>
                            <FontAwesomeIconView glyphName="TRASH" size="16" />
                        </graphic>
                    </Button>
                    <Button fx:id="generateQRCodeButton" text=" QR Code" onAction="#handleGenerateQRCode" />

                    <ImageView fx:id="qrCodeImageView" />

                </HBox>
                <columnConstraints>
                    <ColumnConstraints />
                    <ColumnConstraints />
                </columnConstraints>
                <rowConstraints>
                    <RowConstraints />
                    <RowConstraints />
                    <RowConstraints />
                    <RowConstraints />
                    <RowConstraints />
                    <RowConstraints />
                    <RowConstraints />
                    <RowConstraints />
                </rowConstraints>
            </GridPane>
            <!-- TableView à droite -->
            <TableView fx:id="tableEquipements" prefHeight="300" prefWidth="600">
                <columns>
                    <TableColumn fx:id="colId" text="ID" />
                    <TableColumn fx:id="colNom" text="Nom" />
                    <TableColumn fx:id="colCategorie" text="Catégorie" />
                    <TableColumn fx:id="colPrix" text="Prix" />
                    <TableColumn fx:id="colDisponibilite" text="Disponibilité" />
                    <TableColumn fx:id="imageColumn" text="Image" />
                    <TableColumn fx:id="colDescription" text="Description"/>

                </columns>
            </TableView>

        </HBox>

    </center>

    <!-- Boutons centrés -->
    <bottom>
        <HBox alignment="CENTER" spacing="10" style="-fx-padding: 20px;">
            <Button onAction="#handleSortByPriceDesc" style="-fx-background-color: #4CAF50; -fx-text-fill: black;" text="Prix Le plus Haut" styleClass="bounce-button">
                <graphic>
                    <FontAwesomeIconView glyphName="SORT_AMOUNT_DESC" size="16" />
                </graphic>
            </Button>

            <Button onAction="#trierParPrixAscendant" style="-fx-background-color: #adff2f ; -fx-text-fill: Black;" text="Prix Le plus Bas" styleClass="bounce-button">
                <graphic>
                    <FontAwesomeIconView glyphName="SORT_AMOUNT_ASC" size="16" />
                </graphic>
            </Button>

            <Button text="Voir Statistiques" onAction="#afficherStatistiques" styleClass="bounce-button">
                <graphic>
                    <FontAwesomeIconView glyphName="BAR_CHART" size="16" />
                </graphic>
            </Button>

            <Button onAction="#openCategoryView" text="Ouvrir Catégories" styleClass="bounce-button">
                <graphic>
                    <FontAwesomeIconView glyphName="FOLDER_OPEN" size="16" />
                </graphic>
            </Button>

            <HBox spacing="10">
                <TextField fx:id="searchField" promptText="Rechercher..." />
                <Button text="Rechercher" onAction="#handleSearch" styleClass="bounce-button">
                    <graphic>
                        <FontAwesomeIconView glyphName="SEARCH" size="16" />
                    </graphic>
                </Button>
            </HBox>


            <Button fx:id="btnExportPDF" text="Exporter en PDF" onAction="#handleExportPDF" styleClass="bounce-button">
                    <graphic>
                        <FontAwesomeIconView glyphName="FILE_PDF_ALT" size="16" />
                    </graphic>
                </Button>
            </HBox>










    </bottom>

</BorderPane>
